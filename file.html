<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"></head><body><textarea id="1" style="width: 160px;" placeholder="text"></textarea>
<br>
datei:<input id="3" style="width: 80px;" placeholder="output">.<input id="4" style="width: 40px;" placeholder="txt">
<br>
<input id="5" type="checkbox">use date as filename
<br>
<button id="2">Download</button>

<script>
function download(filename, text) {
var element = document.createElement('a');
element.setAttribute('href', 'data:base64/plain; charset=utf-8,' + encodeURIComponent(text));
element.setAttribute('download', filename);

element.style.display = 'none';
document.body.appendChild(element);
element.click();
document.body.removeChild(element);
}

document.getElementById("2").addEventListener("click", function(){
var text = document.getElementById("1").value;
var dateiname = document.getElementById("3").value;
var dateityp = document.getElementById("4").value;

if (text=="")
{
text = "text";
}

if (dateiname=="")
{
dateiname = "output";
}

if (dateityp=="")
{
dateityp = "txt";
}

if (text=="%-")
{
text = "";
}

if (dateiname=="%-"&&dateityp=="%-")
{
dateiname = "-";
}

if (dateiname=="%-")
{
dateiname = "";
}

if (dateityp=="%-")
{
dateityp = "";
}

var z = document.getElementById("3").disabled
if (z=="1")
{
var date = new Date();
var dateFilename = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear() + "_" + date.getHours() + "-" + date.getMinutes();
dateiname = dateFilename;
}

var filename = dateiname + "." + dateityp
download(filename, text);
}, false);

document.addEventListener("keypress", function(){
if(event.keyCode==13)
{
if(document.getElementById('1').matches(':focus'))
{
}
else
{
document.getElementById("2").click()
}
}

});
document.getElementById("5").addEventListener("click", function(){
  document.getElementById("3").toggleAttribute("disabled");
  var date = new Date();
  var dateFilename = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear() + "_" + date.getHours() + "-" + date.getMinutes();
  var z = document.getElementById("3").disabled
  if (z=="1")
  {
  document.getElementById("3").placeholder = "D-M-Y_H-M"
  }
  else if (z=="0")
  {
  document.getElementById("3").placeholder = "output"
  }
});
</script>
<br>
<img src="file_files/faviconV2.png">
</body></html>